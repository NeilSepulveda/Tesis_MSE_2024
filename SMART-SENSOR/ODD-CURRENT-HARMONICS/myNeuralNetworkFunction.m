function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 26-Nov-2023 19:01:08.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx4 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.36;0.3;0.098;4.37164947138322];
x1_step1.gain = [0.111856823266219;0.115473441108545;1.10864745011086;0.00674789643665598];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.4043268728006959023;9.3336831635748591651;0.97676055028645658584;0.51458588819730188835;-3.735148429696833805;-0.3572641983935684884;-3.04703990078981235;-1.8391276700393714982;9.1577626798717393086;-2.0949718605412837036;1.9768296337781727789;4.1193807584222446039;-0.43049545640419539794;-1.889286899288613597;1.4846851120633484111;-2.4769340451178103457;-0.67762489967841121885;-0.65930865829112184073;-2.1850631031710872065;-0.98145658477591712909;-0.58133746275488351607;4.2561112103771110426;0.55071349890906140523;-8.0910341083420114217;-5.4892261917634153079;0.96639412656108836241;3.4833148265783941966;3.9832657837189131556;2.1350717277710331565;0.56512872341309661195;2.0831269289311218351;-2.1200709959251873293;-5.4399176195418732505;4.6873809898284628517;-1.5794576658845016492;1.8337429459542333721;-1.0276622489139906058;-1.9744987565547720276;-9.3205846220785879552;-12.591614213024135083;0.77059794883716115077;2.2081444587045293559;-0.39938649994174513225;0.88456297686341311959;-6.7247520731125511873;-0.63663779911119044996;2.5922172106763738952;-2.4739134477656352651;0.50624967584997981884;-5.1917608273212580983];
IW1_1 = [2.8223691233296621661 5.9834708275090582319 -5.2499227102449541604 5.0167737244549357456;-4.61890077972245372 -6.1697766247249052896 6.7469884738729124507 4.8760007665231750451;-1.1986607306308356691 -0.97958259501274691505 -1.5535572841777223196 0.062325985791967769556;5.2265201489357124842 3.323973806835383904 6.6853843195896338614 -1.7367196745487563092;0.27200560834113435282 -0.19702274994508037209 -0.85410199875992387497 -6.6952136630462666389;-2.5632875173651288314 1.5303213222604366006 -1.9590223933697135106 0.59194686445516420115;-2.8867694098922966894 -4.9008668302901714497 3.4724665751023535698 3.3939288214378948716;2.4830555118857873254 2.0819784815021442625 0.31740952779398795558 2.4043342036671830897;-1.457450267681106082 9.5572550416938035767 -3.0117349967021040946 5.6153652880040185735;-3.6585462381105733343 -2.9071082061658048978 -0.18503793068741702932 3.120966605851721809;-3.3053728146806165 -2.0340533206701305602 -3.2370600490194600951 3.7960286846414414974;3.5130978713585574447 6.0709095714107235153 4.3039328044237246118 5.2386784067075744531;1.4823981596695599006 -2.7911926101733892658 0.32528892726925245915 -0.82357351858548255574;0.48976516425949495614 -2.1936778560888741119 -5.3530934268513430396 -0.17391934569970551872;0.22196209120522986113 -2.2455214991233392041 -1.0155011150945856269 1.9864777559839301713;0.4081677253075557954 2.0331861693358579402 -4.5618582649390706507 0.62643482871799471834;0.04833811553286918028 1.0759788974596828925 3.314615571222018886 0.21013039345308784367;3.939016838935678777 0.056168202598923730462 -8.4508112149164542615 0.54170257327760862331;-5.5692202931403320676 -2.8035530125970531401 2.5915747260529902185 5.6870412786016766304;0.21315300953501231662 -2.7948763288480975575 15.081130560888567516 -9.9491650511885723063;0.85947776704243039614 0.4597383692657233123 1.1083810456106431008 -5.5787004193775109329;-0.22651289660824738825 4.517917301092354343 -5.6576621429240452343 8.1434734208128780608;2.2801766866661852262 3.5174305960591354392 1.2748040923604695429 -4.5874529229798053365;0.5145677982848165799 -1.5882973956381229996 -6.9439225447059342855 -3.5998128698671099102;-0.016547377187027673129 -4.4186329534192116952 4.9215430071696752989 -8.9042380549395687694;-0.23185762258651268497 -3.0355611863351232849 7.6670737139312672426 -0.34747039057956058405;-1.0931734385392450903 -0.48092442690152464868 -6.3694736439978063558 2.1759824798344018504;-0.47144475805277819003 -1.5810538631330004478 5.4182367971181060184 4.1941519703087575266;1.2541284988311305337 -0.095997919917022042635 1.0349851302588319868 1.5686084741115402519;-1.8167130878177548681 -0.65646120709548327898 4.8525925906468163618 -0.4747692363125521342;-1.5433300732088317542 9.7073626803652821593 -2.0282106117492215702 -5.8968446431142940156;-2.2434175471473905006 -3.8018145120705058027 3.2914786952964432132 2.4113722636614056682;-0.92831959738548786021 -8.6704910628409486151 -0.52345756039941770954 7.053308545060012591;3.6772044963467975798 4.6148395287743690929 -2.1226467871974210588 -0.33077945489194265916;-6.1466635226869970055 -10.776248106285787998 -7.1343658944472361227 13.476796080628767882;-2.5173292468210188844 -2.9803398735142123677 -6.1394090374447731762 -2.3513320146382583609;-1.0009757288605991565 -4.1610669358143521634 -3.1267734519899277323 0.074207061044650607373;0.32029740423318003861 3.8456133889350332389 -4.1009258956793468442 -2.1531153954251824878;-6.1986205895995221127 -3.4917228145426277841 5.4810455650913025849 -6.4912907414041978171;-9.7987416234446875762 -6.3141193795745582662 -2.2208023329482426966 -1.9823952963737625499;-5.4865959495310905325 -0.80649587017374346765 -3.7249299966153150976 0.61066610079356187235;2.5519956191734731732 4.6746785753804225294 -1.0283002426952647657 -2.9385292646726037802;-5.2561172787058678679 -3.9831240152451763414 -9.9068545168850761229 4.8399054813903052974;1.6865120874254162509 4.4653914800523040185 3.9669678350374590892 1.6117860588334604888;-2.9696613868706513983 -0.91621340929022365707 -9.0696416559412948999 2.779646723495804217;2.4868968528163044596 -1.5773535714470874325 5.2144793035213297117 -2.7308458861426800901;4.4871216419626112071 1.5797941753666893128 4.7362456714272589409 3.7403713262062452394;-8.2800754776505876009 0.50144836430342376588 -0.20474825502229526686 8.5388768507969725619;4.1359586967768509069 -4.6994535150847047689 -4.6519754914795461431 2.3241556414720565549;-7.7288493633957777718 -6.0460409626766633551 -0.61057131406091380565 3.4372110296181559441];

% Layer 2
b2 = -3.3797284544467389722;
LW2_1 = [3.1912013012315050275 0.30661376003052304151 -3.4224714282953874189 -1.1872710511567783342 -1.6667840180410729012 7.3575676474347702083 -3.3789504723768808425 3.0901769378041201719 4.0185738158137302989 4.86963734742237353 2.9109483501564308305 2.4850009227689175972 7.5021812270946561796 -2.128730018988879813 -5.3784507493937221412 1.756483259770280414 4.4845548005822415405 2.9634430855740991895 7.0259057430951346035 -0.1695829454141704884 4.4205493778398450289 -4.3604274613380340497 1.9627847261859359129 -0.46441732268596086497 -4.1000348730032012412 3.5172602806883257465 3.1166756812073375116 -0.40193181072888789496 3.1641752650305638994 -1.3450578396889993904 5.9890363374575104061 2.2402084604058654094 6.2695122953313626724 -6.4924347164304139213 0.3729259014454266441 3.1375646115334303587 -4.492140636238660889 -0.80433388177030595845 3.847631733055899339 -0.83480045935330882134 6.5930860675704261453 7.4306619800641184881 0.33629815756585901276 3.9899396880419115696 -0.35869915190690260243 -5.127771924118150082 -2.3574603781051677309 -6.4261814357332092129 -5.5391488429944448768 0.64964937042954740143];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 13.4857812958077;
y1_step1.xoffset = 0.0110434782608696;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
